<root main_tree_to_execute="MainTree">
  <BehaviorTree ID="MainTree">

    <Sequence name="main_sequence">

      <!-- 1. Spawn box -->
      <ROS2Service service_name="/spawn_box"/>

      <!-- 2. Navigate to start -->
      <ROS2Action action_name="/navigate_to_pose" goal_msg="{ &quot;x&quot;:1.0, &quot;y&quot;:2.0, &quot;z&quot;:0.0, &quot;w&quot;:1.0 }"/>

      <!-- 3. Move slider -->
      <ROS2Action action_name="/slider_position_controller/follow_joint_trajectory"
                  goal_msg="{ &quot;joint_names&quot;:[&quot;slider_joint&quot;], &quot;points&quot;:[{&quot;positions&quot;:[0.0], &quot;time_from_start_sec&quot;:0}, {&quot;positions&quot;:[0.5], &quot;time_from_start_sec&quot;:5}] }"/>

      <!-- 4. Vision sequence -->
      <Sequence name="vision_sequence">
        <ROS2Service service_name="/start_detection"/>
        <Wait msec="2000"/>
        <ROS2Service service_name="/start_picking"/>
        <ROS2Service service_name="/stop_detection"/>
      </Sequence>

      <!-- 5. Attach -->
      <ROS2Service service_name="/AttachDetach"/>

      <!-- 6. Arm home -->
      <ROS2Action action_name="/moveit_arm/follow_joint_trajectory"
                  goal_msg="{ &quot;joint_positions&quot;:[0.0,0.0,0.0,0.0,0.0,0.0] }"/>

      <!-- 7. Navigate lift_pre + lift open -->
      <Sequence name="lift_sequence">
        <ROS2Action action_name="/navigate_to_pose"
                    goal_msg="{ &quot;x&quot;:1.0, &quot;y&quot;:2.0, &quot;z&quot;:0.0, &quot;w&quot;:1.0 }"/>
        <Wait msec="1000"/>
        <ROS2Service service_name="/open_lift"/>
      </Sequence>

      <!-- 8. Move forward/back sequence -->
      <Sequence name="move_sequence">
        <ROS2Action action_name="/navigate_to_pose"
                    goal_msg="{ &quot;x&quot;:3.0, &quot;y&quot;:2.0, &quot;z&quot;:0.0, &quot;w&quot;:1.0 }"/>
        <Wait msec="2000"/>
        <ROS2Action action_name="/navigate_to_pose"
                    goal_msg="{ &quot;x&quot;:1.0, &quot;y&quot;:2.0, &quot;z&quot;:0.0, &quot;w&quot;:1.0 }"/>
      </Sequence>

      <!-- 9. Pick & drop sequence -->
      <Sequence name="pick_drop_sequence">
        <ROS2Action action_name="/navigate_to_pose"
                    goal_msg="{ &quot;x&quot;:4.0, &quot;y&quot;:1.0, &quot;z&quot;:0.0, &quot;w&quot;:1.0 }"/>
        <ROS2Action action_name="/moveit_arm/follow_joint_trajectory"
                    goal_msg="{ &quot;joint_positions&quot;:[0.2,0.5,0.0,0.0,0.0,0.0] }"/>
        <ROS2Service service_name="/AttachDetach"/>
        <ROS2Action action_name="/moveit_arm/follow_joint_trajectory"
                    goal_msg="{ &quot;joint_positions&quot;:[0.0,0.0,0.0,0.0,0.0,0.0] }"/>
      </Sequence>

    </Sequence>

  </BehaviorTree>
</root>
